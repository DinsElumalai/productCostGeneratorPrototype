<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2B Profit Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
</head>
<body>
    <div class="container">
        <div class="row mt-4">
            <div class="col"><h1>B2B - Product Cost Generator Prototype</h1></div>
            <div class="col-2">
                <select id="b2bMinMax" class="form-select border-warning text-success fs-4">
                    <option value="min">B2B Min</option>
                    <option value="max">B2B Max</option>
                </select>
            </div>
            <div class="col-2">
                <a type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#bulkProcess">Bulk Upload</a>
            </div>
        </div>
        <div class="row">
            <div class="col">ASIN</div>
            <div class="col">Category %</div>
            <div class="col">Product Weight in Kgs</div>
            <div class="col">IND Product Price</div>            
        </div>
        <div class="row">
            <div class="col"><input type="text" name="asin" id="asin" class="form-control"/></div>
            <div class="col">
                <select class="form-select" id="category"></select>
            </div>
            <div class="col"><input type="text" name="productWeight" id="productWeight" class="form-control"/></div>
            <div class="col"><input type="text" name="indPP" id="indPP" class="form-control" /></div>
        </div>
        <div class="row my-4">
            <button type="button" class="btn btn-primary" id="checkProfitBtn" name="checkProfitBtn">Check for Profit</button>
        </div>
        <div class="row">
            <div class="col">SKU</div>
            <div class="col">PW Margin</div>
            <div class="col">SW Landing Price</div>
            <div class="col">PW Shipping Charges</div>
        </div>
        <div class="row">            
            <div class="col"><input type="text" name="sku" id="sku" readonly class="form-control"/></div>            
            <div class="col"><input type="text" name="pwMargin" id="pwMargin" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="swLandingPrice" id="swLandingPrice" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="pwShippingCharges" id="pwShippingCharges"  class="form-control" readonly/></div>
        </div>
        <div class="row">
            <div class="col">Freight Charges/KG</div>
            <div class="col">Total Freight Charges</div>
            <div class="col">Invoice Freight Charges</div>
            <div class="col">Aramex Insurance Charges</div>
        </div>
        <div class="row">
            <div class="col"><input type="text" name="freightChargesPerKg" id="freightChargesPerKg" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="totalFreightCharges" id="totalFreightCharges" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="invoiceFreightCharges" id="invoiceFreightCharges" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="aramexInsuranceCharges" id="aramexInsuranceCharges" readonly class="form-control"/></div>
        </div>
        <div class="row">
            <div class="col">Aramex Insurance</div>
            <div class="col">CIF Value</div>
            <div class="col">Duty On PW</div>
            <div class="col">Duty on Duty</div>
        </div>
        <div class="row">
            <div class="col"><input type="text" name="aramexInsurance" id="aramexInsurance" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="cifValue" id="cifValue" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="pwDuty" id="pwDuty" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="dutyOnDuty" id="dutyOnDuty" readonly class="form-control"/></div>
        </div>
        <div class="row">
            <div class="col">VAT PW Shipment</div>
            <div class="col">FRDM</div>
            <div class="col">Delivery Duty Paid</div>
            <div class="col">SW Local Courier</div>
        </div>
        <div class="row">
            <div class="col"><input type="text" name="vatPwShipment" id="vatPwShipment" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="frdm" id="frdm" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="deliveryDutyPaid" id="deliveryDutyPaid" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="swLocalCourier" id="swLocalCourier" readonly class="form-control"/></div>
        </div>
        <div class="row">
            <div class="col">SW Margin</div>
            <div class="col">Panel Commission</div>
            <div class="col">Country VAT on Panel</div>
            <div class="col">Return On Product</div>
        </div>
        <div class="row">
            <div class="col"><input type="text" name="swMargin" id="swMargin" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="panelCommission" id="panelCommission" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="countryVatOnPanel" id="countryVatOnPanel" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="returnOnProduct" id="returnOnProduct" readonly class="form-control"/></div>
        </div>
        <div class="row">
            <div class="col">Total Calculation</div>
            <div class="col">Round Up SW</div>
            <div class="col">Sw Extra Profit INR</div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col"><input type="text" name="calculation" id="calculation" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="roundUpSw" id="roundUpSw" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="swExtraProfitINR" id="swExtraProfitINR" readonly class="form-control"/></div>
            <div class="col"><div id="isProfit">Profit/Loss</div></div>
        </div>
        <div class="row">
            <div class="col">SP INR</div>
            <div class="col">SP Currency</div>
            <div class="col">Sales Invoice INR</div>
            <div class="col">Sales Invoice Currency</div>
        </div>
        <div class="row mb-4">
            <div class="col"><input type="text" name="spINR" id="spINR" class="form-control" disabled /></div>
            <div class="col"><input type="text" name="spCurrency" id="spCurrency" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="pwInvoiceINR" id="pwInvoiceINR" readonly class="form-control"/></div>
            <div class="col"><input type="text" name="salesInvoiceCurrency" id="salesInvoiceCurrency" readonly class="form-control"/></div>
        </div>
        <div class="border p-4 mb-4">
            <div class="row mb-4">
                <div class="col">SP Currency</div>
                <div class="col"></div>
                <div class="col">Diff Sp Amount</div>
                <div class="col"><input type="text" name="revSpDiff" id="revSpDiff" class="form-control"/></div>
            </div>
            <div class="row mb-4">
                <div class="col"><input type="text" name="revSpCurrency" id="revSpCurrency" class="form-control"/></div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="calcRevDiff()" id="checkDiff">Check Diff</button>
                    <span id="revResult"> Profit / Loss</span>
                </div>
                <div class="col">Diff INR Amount</div>
                <div class="col"><input type="text" name="revINRDiff" id="revINRDiff" class="form-control"/></div>
            </div>
        </div>
        
    </div>
    <!-- Bulk Upload-->
    <div class="modal fade " id="bulkProcess" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="bulkProcess" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="bulkProcessLabel">Bulk Processing</h5>
            </div>
            <div class="modal-body">
              <input type="file" class="form-control" id="bulkFile" name="bulkFile"/>
              <br>
              <button type="button" class="btn btn-success" id="bulkOpBtn" disabled>Download Processed Excel</button>
            </div>
            <div class="modal-footer">
                <h6>*Bulk Process will be stopped and can't resume, if cancelled before completion</h5>
              <button class="btn btn-secondary" data-bs-dismiss="modal" >Cancel</button>
              <button type="button" class="btn btn-primary" id="bulkUploadBtn">Check for Profit</button>
            </div>
          </div>
        </div>
    </div>
    <style>
        #isProfit, #revResult{
            border: solid 2px grey;
            width: 270px;
            padding: 5px;
            border-radius: 5px;
            text-align:center;
        }
        #revResult{
            margin-left: 30px;
            padding: 10px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
    <script src="./b2bController.js" type="module"></script>
    <script src="./bulkProcess.js" type="module"></script>
    
</body>
</html>